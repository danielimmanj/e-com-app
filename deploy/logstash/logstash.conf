input {
  file {
    # Specify the path where your application logs are stored
    path => "/home/daniel/Documents/logs/eCommerce/*.log"
    
    # Log type (you can set this to categorize your logs)
    type => "eCommerce-logs"

    # Read new log entries from the end of the file
    start_position => "beginning"

    # Handle file rotation
    sincedb_path => "/dev/null"
  }
}

filter {
  # Example grok filter to parse your logs
  # Modify this pattern according to your log format
  grok {
    match => { "message" => "%{TIMESTAMP_ISO8601:timestamp} %{LOGLEVEL:loglevel} %{GREEDYDATA:logmessage}" }
  }

  # Optionally add metadata to logs, like application or environment
  mutate {
    add_field => { "app_name" => "eCommerce" }
    add_field => { "environment" => "production" }
  }

  # Convert timestamp to proper format
  date {
    match => ["timestamp", "ISO8601"]
    target => "@timestamp"
  }
}

output {
  # Output to Elasticsearch (change this to your Elasticsearch host)
  elasticsearch {
    hosts => ["http://elasticsearch:9200"]
    index => "ecommerce-logs-%{+YYYY.MM.dd}" # Daily index format
  }

  # Optional: Output to stdout for debugging
  stdout { codec => rubydebug }
}

